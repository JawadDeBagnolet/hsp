<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="appli.hsp.PatientsController"
            style="-fx-background-color: linear-gradient(to bottom, #2c3e50, #3498db);">

    <!-- Barre de navigation en haut -->
    <top>
        <HBox style="-fx-background-color: #34495e; -fx-padding: 15; -fx-border-color: #2c3e50; -fx-border-width: 0 0 2 0;">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            
            <!-- Logo/Titre -->
            <VBox spacing="5" HBox.hgrow="ALWAYS">
                <Text text="HSP" 
                      style="-fx-font-size: 24px; -fx-fill: #3498db; -fx-font-weight: bold;" />
                <Text text="HÃ´pital de SantÃ© Publique" 
                      style="-fx-font-size: 12px; -fx-fill: #ecf0f1;" />
            </VBox>
            
            <!-- Menu de navigation -->
            <HBox spacing="20" alignment="CENTER">
                <Button text="Accueil"
                        style="-fx-background-color: transparent; -fx-text-fill: #ecf0f1; -fx-font-size: 14px; -fx-border-color: transparent; -fx-cursor: hand;"
                        onAction="#versAccueil" />
                
                <Separator orientation="VERTICAL" style="-fx-background-color: #7f8c8d;" />
                
                <Button text="Patients"
                        style="-fx-background-color: #3498db; -fx-text-fill: #ffffff; -fx-font-size: 14px; -fx-border-color: #2980b9; -fx-border-width: 1; -fx-border-radius: 5; -fx-background-radius: 5; -fx-cursor: hand;" />
                
                <Separator orientation="VERTICAL" style="-fx-background-color: #7f8c8d;" />
                
                <Button text="Commandes"
                        style="-fx-background-color: transparent; -fx-text-fill: #ecf0f1; -fx-font-size: 14px; -fx-border-color: transparent; -fx-cursor: hand;"
                        onAction="#versCommandes" />
                
                <Separator orientation="VERTICAL" style="-fx-background-color: #7f8c8d;" />
                
                <Button text="Utilisateurs"
                        style="-fx-background-color: transparent; -fx-text-fill: #ecf0f1; -fx-font-size: 14px; -fx-border-color: transparent; -fx-cursor: hand;"
                        onAction="#versUtilisateurs" />
                
                <Separator orientation="VERTICAL" style="-fx-background-color: #7f8c8d;" />
                
                <Button text="Mon espace"
                        style="-fx-background-color: transparent; -fx-text-fill: #ecf0f1; -fx-font-size: 14px; -fx-border-color: transparent; -fx-cursor: hand;"
                        onAction="#versMonEspace" />
                
                <Button text="DÃ©connexion"
                        style="-fx-background-color: #e74c3c; -fx-text-fill: #ffffff; -fx-font-size: 14px; -fx-border-color: #c0392b; -fx-border-width: 1; -fx-border-radius: 5; -fx-background-radius: 5; -fx-cursor: hand;"
                        onAction="#deconnexion" />
            </HBox>
        </HBox>
    </top>

    <!-- Contenu principal -->
    <center>
        <HBox spacing="20" style="-fx-padding: 20;">
            <!-- Panneau gauche : Liste des patients -->
            <VBox spacing="15" style="-fx-background-color: rgba(255, 255, 255, 0.1); -fx-padding: 20; -fx-background-radius: 15; -fx-border-color: rgba(255, 255, 255, 0.3); -fx-border-width: 1; -fx-border-radius: 15;" HBox.hgrow="ALWAYS">
                <children>
                    <!-- Titre et statistiques -->
                    <VBox spacing="10" alignment="CENTER">
                        <Text text="ðŸ“‹ Liste des Patients" style="-fx-font-size: 24px; -fx-fill: #ffffff; -fx-font-weight: bold;" />
                        <Text text="Gestion complÃ¨te des patients" style="-fx-font-size: 14px; -fx-fill: #ecf0f1;" />
                        
                        <HBox spacing="15" alignment="CENTER" style="-fx-padding: 10 0;">
                            <VBox spacing="5" alignment="CENTER" style="-fx-background-color: rgba(52, 152, 219, 0.2); -fx-padding: 10; -fx-background-radius: 10;">
                                <Text text="Total" style="-fx-font-size: 12px; -fx-fill: #ffffff;" />
                                <Label fx:id="totalPatientsLabel" text="0" style="-fx-font-size: 20px; -fx-fill: #3498db; -fx-font-weight: bold;" />
                            </VBox>
                            <Button text="ðŸ”„" onAction="#handleRefresh" 
                                    style="-fx-background-color: #27ae60; -fx-text-fill: #ffffff; -fx-font-size: 16px; -fx-background-radius: 20; -fx-pref-width: 40; -fx-pref-height: 40; -fx-cursor: hand;" />
                        </HBox>
                    </VBox>
                    
                    <!-- Champ de recherche -->
                    <TextField fx:id="rechercheField" promptText="ðŸ” Rechercher un patient..." 
                              onKeyTyped="#rechercherPatients"
                              style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 10; -fx-border-color: transparent; -fx-prompt-text-fill: #7f8c8d; -fx-font-size: 14px;" />
                    
                    <!-- Liste des patients -->
                    <ListView fx:id="patientsListView" prefHeight="400" VBox.vgrow="ALWAYS" 
                              style="-fx-background-color: rgba(255, 255, 255, 0.95); -fx-background-radius: 10; -fx-border-color: rgba(255, 255, 255, 0.3); -fx-border-width: 1; -fx-border-radius: 10;" />
                </children>
            </VBox>
            
            <!-- Panneau droit : Formulaire -->
            <VBox spacing="15" style="-fx-background-color: rgba(255, 255, 255, 0.1); -fx-padding: 20; -fx-background-radius: 15; -fx-border-color: rgba(255, 255, 255, 0.3); -fx-border-width: 1; -fx-border-radius: 15; -fx-pref-width: 350;">
                <children>
                    <!-- Titre du formulaire -->
                    <VBox spacing="5" alignment="CENTER">
                        <Text text="ðŸ“ Fiche Patient" style="-fx-font-size: 20px; -fx-fill: #ffffff; -fx-font-weight: bold;" />
                        <Text text="Ajouter ou modifier un patient" style="-fx-font-size: 12px; -fx-fill: #ecf0f1;" />
                    </VBox>
                    
                    <!-- Message d'information -->
                    <Label fx:id="messageLabel" text="PrÃªt" style="-fx-text-fill: #3498db; -fx-font-size: 12px; -fx-font-weight: bold; -fx-wrap-text: true;" />
                    
                    <!-- Champs du formulaire -->
                    <GridPane hgap="10" vgap="10">
                        <children>
                            <!-- Nom -->
                            <Label text="Nom:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                            <TextField fx:id="nomField" promptText="Nom du patient" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="0" GridPane.columnIndex="1" />
                            
                            <!-- PrÃ©nom -->
                            <Label text="PrÃ©nom:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                            <TextField fx:id="prenomField" promptText="PrÃ©nom du patient" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="1" GridPane.columnIndex="1" />
                            
                            <!-- NumÃ©ro de sÃ©curitÃ© sociale -->
                            <Label text="NÂ° SÃ©curitÃ© Sociale:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                            <TextField fx:id="numSecuField" promptText="NumÃ©ro de sÃ©curitÃ© sociale" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="2" GridPane.columnIndex="1" />
                            
                            <!-- Email -->
                            <Label text="Email:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                            <TextField fx:id="emailField" promptText="Email du patient" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="3" GridPane.columnIndex="1" />
                            
                            <!-- TÃ©lÃ©phone -->
                            <Label text="TÃ©lÃ©phone:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="4" GridPane.columnIndex="0" />
                            <TextField fx:id="telField" promptText="NumÃ©ro de tÃ©lÃ©phone" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="4" GridPane.columnIndex="1" />
                            
                            <!-- Rue -->
                            <Label text="Rue:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="5" GridPane.columnIndex="0" />
                            <TextField fx:id="rueField" promptText="Adresse" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="5" GridPane.columnIndex="1" />
                            
                            <!-- Code postal -->
                            <Label text="Code Postal:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="6" GridPane.columnIndex="0" />
                            <TextField fx:id="cpField" promptText="Code postal" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="6" GridPane.columnIndex="1" />
                            
                            <!-- Ville -->
                            <Label text="Ville:" style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" GridPane.rowIndex="7" GridPane.columnIndex="0" />
                            <TextField fx:id="villeField" promptText="Ville" style="-fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 5;" GridPane.rowIndex="7" GridPane.columnIndex="1" />
                        </children>
                    </GridPane>
                    
                    <!-- Boutons d'action -->
                    <VBox spacing="10">
                        <Button fx:id="ajouterButton" text="âž• Ajouter Patient" onAction="#ajouterPatient" 
                                style="-fx-background-color: #27ae60; -fx-text-fill: #ffffff; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 10; -fx-background-radius: 10; -fx-cursor: hand;" />
                        
                        <HBox spacing="10">
                            <Button fx:id="modifierButton" text="âœï¸ Modifier" onAction="#modifierPatient" 
                                    style="-fx-background-color: #f39c12; -fx-text-fill: #ffffff; -fx-font-size: 12px; -fx-font-weight: bold; -fx-padding: 8; -fx-background-radius: 8; -fx-cursor: hand;" HBox.hgrow="ALWAYS" disable="true" />
                            
                            <Button fx:id="supprimerButton" text="ðŸ—‘ï¸ Supprimer" onAction="#supprimerPatient" 
                                    style="-fx-background-color: #e74c3c; -fx-text-fill: #ffffff; -fx-font-size: 12px; -fx-font-weight: bold; -fx-padding: 8; -fx-background-radius: 8; -fx-cursor: hand;" HBox.hgrow="ALWAYS" disable="true" />
                        </HBox>
                        
                        <Button fx:id="viderButton" text="ðŸ§¹ Vider Formulaire" onAction="#viderChamps" 
                                style="-fx-background-color: #95a5a6; -fx-text-fill: #ffffff; -fx-font-size: 12px; -fx-font-weight: bold; -fx-padding: 8; -fx-background-radius: 8; -fx-cursor: hand;" />
                    </VBox>
                </children>
            </VBox>
        </HBox>
    </center>
</BorderPane>
